<p></p><p>--===============================================</p><p>--查看各DB上的脏页</p><p>SELECT DB_NAME(database_id) AS DBName<br/>,COUNT(1) AS DirtyPageCount&nbsp;<br/>FROM sys.dm_os_buffer_descriptors<br/>WHERE is_modified=1<br/>GROUP BY database_id</p><p style="white-space: normal;">--===============================================</p><p style="white-space: normal;">--<span style="font-family: 微软雅黑, sans-serif;">查看某个DB上脏页的分布情况</span></p><p>SELECT&nbsp; OBJECT_NAME(p.[object_id]) AS [TableName]&nbsp;<br/>, ISNULL(i.name, &#39;-- HEAP --&#39;) AS ObjectName&nbsp;<br/>, COUNT(1) AS PagesCount<br/>FROM sys.allocation_units AS a&nbsp;<br/>INNER JOIN sys.dm_os_buffer_descriptors AS b&nbsp;<br/>ON a.allocation_unit_id = b.allocation_unit_id&nbsp;<br/>INNER JOIN sys.partitions AS p&nbsp;<br/>INNER JOIN sys.indexes i&nbsp;<br/>ON p.index_id = i.index_id&nbsp;<br/>AND p.[object_id] = i.[object_id]&nbsp;<br/>ON a.container_id = p.hobt_id&nbsp;<br/>WHERE b.database_id = DB_ID()&nbsp;<br/>AND B.is_modified=1<br/>GROUP BY p.[object_id], i.name</p><p><br/></p>