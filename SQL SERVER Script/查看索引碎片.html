<p>--查看索引碎片</p><p>--&#39;DETAILED&#39;选项会导致扫描全表，慎用</p><p>SELECT OBJECT_NAME (ips.[object_id]) AS &#39;Object Name&#39;,</p><p>si.name AS &#39;Index Name&#39;, &nbsp;&nbsp;</p><p>ROUND (ips.avg_fragmentation_in_percent, 2) AS &#39;Fragmentation&#39;, &nbsp;&nbsp;</p><p>ips.page_count AS &#39;Pages&#39;, &nbsp;&nbsp;</p><p>ROUND (ips.avg_page_space_used_in_percent, 2) AS &#39;Page Density&#39;</p><p>FROM sys.dm_db_index_physical_stats (DB_ID (&#39;SQLskillsDB&#39;), NULL, NULL, NULL, &#39;DETAILED&#39;)</p><p>ips &nbsp;CROSS APPLY sys.indexes si&nbsp;</p><p>WHERE &nbsp; si.object_id = ips.object_id &nbsp;&nbsp;</p><p>AND si.index_id = ips.index_id &nbsp;&nbsp;</p><p>AND ips.index_level = 0 -- only the leaf level &nbsp;&nbsp;</p><p>AND ips.avg_fragmentation_in_percent &gt; 10; -- filter on fragmentation&nbsp;</p><p>GO</p><p><br/></p>