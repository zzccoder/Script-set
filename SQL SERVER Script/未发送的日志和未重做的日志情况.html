<p></p><p>--===================================================</p><p>--未发送的日志和未重做的日志情况</p><p>WITH tmp AS(</p><p>SELECT</p><p>ROW_NUMBER()OVER(PARTITION BY Database_id ORDER BY local_time DESC) AS RID,</p><p>*</p><p>FROM msdb.dbo.dbm_monitor_data</p><p>)</p><p>SELECT * &nbsp;FROM tmp</p><p>WHERE RID=1</p><p>AND (</p><p>([status]&lt;&gt;2&nbsp;</p><p>AND [status]&lt;&gt;4)&nbsp;</p><p>OR send_queue_size&gt;30000&nbsp;</p><p>OR redo_queue_size&gt;30000)</p>