<p></p><p>CREATE TABLE TB001</p><p>(</p><p>&nbsp;CategoryId INT PRIMARY KEY,</p><p>&nbsp;ParentCategoryId INT,</p><p>&nbsp;CategoryName NVARCHAR(200)</p><p>)</p><p>GO</p><p><br/></p><p>WITH T</p><p>AS</p><p>(</p><p>&nbsp;SELECT T1.CategoryId,</p><p>&nbsp;T1.CategoryName,</p><p>&nbsp;T1.ParentCategoryId,&nbsp;</p><p>&nbsp;0 AS CategoryLevel</p><p>&nbsp;FROM TB001 AS T1</p><p>&nbsp;WHERE T1.ParentCategoryId IS NULL</p><p>&nbsp;UNION ALL</p><p>&nbsp;SELECT T1.CategoryId,</p><p>&nbsp;T1.CategoryName,</p><p>&nbsp;T1.ParentCategoryId,</p><p>&nbsp;T.CategoryLevel+1 AS CategoryLevel</p><p>&nbsp;FROM TB001 AS T1</p><p>&nbsp;INNER JOIN T &nbsp;ON T1.ParentCategoryId=T.CategoryId</p><p>)</p><p>SELECT *</p><p>FROM T</p><p>OPTION(MAXRECURSION 2)</p><p><br/></p><p><br/></p><p>--Note：注意控制最大递归数</p>