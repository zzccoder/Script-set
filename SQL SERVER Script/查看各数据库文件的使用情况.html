<p></p><p>--===============================================================</p><p>--查看各数据库文件的使用情况</p><p>SELECT</p><p>DB.database_id AS DatabaseId,</p><p>DB.name AS DatabaseName,</p><p>MF.name AS LogicFileName,</p><p>MF.type_desc AS TypeDesc,</p><p>CAST(VF.num_of_bytes_read/1024.0/1024.0 AS INT) AS num_of_MB_read,</p><p>CAST(VF.num_of_bytes_written /1024.0/1024.0 AS INT) AS num_of_MB_written,</p><p>VF.num_of_reads,</p><p>VF.num_of_writes,</p><p>VF.io_stall_read_ms,</p><p>VF.io_stall_write_ms,</p><p>VF.io_stall,</p><p>CAST(VF.size_on_disk_bytes/1024.0/1024.0 AS INT) AS size_on_disk_MB</p><p>FROM sys.dm_io_virtual_file_stats(NULL,NULL) AS VF</p><p>INNER JOIN sys.databases DB</p><p>ON VF.database_id=DB.database_id</p><p>INNER JOIN sys.master_files MF</p><p>ON DB.database_id=MF.database_id</p>