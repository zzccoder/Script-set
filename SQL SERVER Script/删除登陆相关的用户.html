<p>--删除登陆相关的用户</p><p>--遍历所有数据库，查找到与登录名相关联的的用户，生成删除脚本</p><p><br/></p><p>DECLARE @loginName NVARCHAR(200)</p><p>SET @loginName=&#39;DBA&#39;;</p><p>DECLARE @comm NVARCHAR(MAX)</p><p>SET @comm=N&#39;</p><p>USE [?];</p><p>IF(EXISTS(SELECT 1 FROM SYS.database_principals u</p><p>WHERE ISNULL(suser_sname(u.sid),N&#39;&#39;&#39;&#39;)=&#39;&#39;&#39;+@loginName+&#39;&#39;&#39;))</p><p>BEGIN</p><p>DECLARE @Sql NVARCHAR(200);</p><p>SELECT @Sql=&#39;&#39;DROP USER [&#39;&#39;+name+&#39;&#39;]&#39;&#39;&nbsp;</p><p>FROM SYS.database_principals u</p><p>WHERE ISNULL(suser_sname(u.sid),N&#39;&#39;&#39;&#39;)=&#39;&#39;&#39;+@loginName+&#39;&#39;&#39;</p><p><br/></p><p>PRINT &#39;&#39;USE [?];&#39;&#39;</p><p>PRINT &#39;&#39;GO&#39;&#39;</p><p>PRINT @Sql</p><p>END</p><p>&#39;</p><p><br/></p><p>EXEC &nbsp;SP_MSFOREACHDB @comm</p><p><br/></p>