<p style="white-space: normal; orphans: 2; widows: 2;">每次数据库备份或日志备份，都会向msdb中多多张表插入数据，如果备份比较频繁的话，需要定期清理。</p><p style="white-space: normal; orphans: 2; widows: 2;">使用sp_delete_backuphistory来清理以下表中数据：</p><p style="white-space: normal; orphans: 2; widows: 2;">backupfile</p><p style="white-space: normal; orphans: 2; widows: 2;">backupfilegroup</p><p style="white-space: normal; orphans: 2; widows: 2;">backupmediafamily</p><p style="white-space: normal; orphans: 2; widows: 2;">backupmediaset</p><p style="white-space: normal; orphans: 2; widows: 2;">backupset</p><p style="white-space: normal; orphans: 2; widows: 2;">restorefile</p><p style="white-space: normal; orphans: 2; widows: 2;">restorefilegroup</p><p style="white-space: normal; orphans: 2; widows: 2;">restorehistory</p><p style="white-space: normal; orphans: 2; widows: 2;">&nbsp;</p><p style="white-space: normal; orphans: 2; widows: 2;">用法：</p><p style="white-space: normal; orphans: 2; widows: 2;">sp_delete_backuphistory [ @oldest_date = ] &#39;oldest_date&#39;</p><p><br/></p><p><br/></p><p>--=============================================================</p><p>--清理10天前的备份历史记录</p><p>DECLARE @oldDate DATETIME</p><p>SET @oldDate=DATEADD(DAY,10,GETDATE())</p><p>EXEC msdb.dbo.sp_delete_backuphistory @oldest_date = @oldDate</p><p><br/></p><p><span style="font-family: 微软雅黑, sans-serif; font-size: 14px;"></span></p><p>--============================================================</p><p>--从备份和还原历史记录表中删除有关指定数据库的信息。</p><p>exec sp_delete_database_backuphistory [ @database_name = ] &#39;database_name&#39;</p><p></p><p><span style="font-family: 微软雅黑, sans-serif; font-size: 14px;"></span><br/></p>