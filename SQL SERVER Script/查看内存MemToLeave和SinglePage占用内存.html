<p style="font-size: 16px; white-space: normal; orphans: 2; widows: 2;"><span style="font-size: 14px;">--数据库使用的总内存：主要由buffer pool中用于缓存的内存+从Buffer pool中借(stolen)的CLERK singlePage的内存+MemToLeave(MultiPage)的内存</span></p><p style="font-size: 16px; white-space: normal; orphans: 2; widows: 2;"><span style="font-size: 14px;">--适用于SQL SERVER 2012以下版本</span></p><p style="font-size: 16px; white-space: normal; orphans: 2; widows: 2;"><span style="font-size: 14px;">SELECT</span><br/><span style="font-size: 14px;">&#39;SinglePage(MB)&#39;,</span><br/><span style="font-size: 14px;">CAST(SUM(C.single_pages_kb)/1024.0 AS NUMERIC(10,2))</span><br/><span style="font-size: 14px;">FROM sys.dm_os_memory_clerks C</span><br/><span style="font-size: 14px;">UNION ALL</span><br/><span style="font-size: 14px;">SELECT&nbsp;</span><br/><span style="font-size: 14px;">&#39;MemToLeave(MB)&#39;,</span><br/><span style="font-size: 14px;">CAST(SUM(C.multi_pages_kb)/1024.0&nbsp; AS NUMERIC(10,2))</span><br/><span style="font-size: 14px;">FROM sys.dm_os_memory_clerks C</span><br/><span style="font-size: 14px;">UNION ALL</span><br/><span style="font-size: 14px;">SELECT</span><br/><span style="font-size: 14px;">&#39;Buffer Pool(MB)&#39;,</span><br/><span style="font-size: 14px;">CAST(COUNT(1) *8.0/1024.0 AS NUMERIC(10,2)) AS UsedMB</span><br/><span style="font-size: 14px;">FROM sys.dm_os_buffer_descriptors DS</span></p><p></p>