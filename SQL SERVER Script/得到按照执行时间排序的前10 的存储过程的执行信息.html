<p>--得到按照执行时间排序的前10 的存储过程的执行信息：</p><p><br/></p><p>SELECT TOP 10 a.object_id,</p><p>a.database_id,</p><p>OBJECT_NAME(object_id, database_id) &#39;proc name&#39;,&nbsp;</p><p>a.cached_time, a.last_execution_time,&nbsp;</p><p>a.total_elapsed_time,&nbsp;</p><p>a.total_elapsed_time/a.execution_count AS [avg_elapsed_time],</p><p>a.execution_count,</p><p>a.total_physical_reads/a.execution_count avg_physical_reads,</p><p>a.total_logical_writes,</p><p>a.total_logical_writes/ a.execution_count &nbsp;avg_logical_reads,</p><p>a.last_elapsed_time,</p><p>a.total_elapsed_time / a.execution_count &nbsp; avg_elapsed_time,</p><p>b.text,c.query_plan&nbsp;</p><p>FROM sys.dm_exec_procedure_stats AS a</p><p>CROSS APPLY sys.dm_exec_sql_text(a.sql_handle) &nbsp;b</p><p>CROSS APPLY sys.dm_exec_query_plan(a.plan_handle) c</p><p>ORDER BY [total_worker_time] DESC;</p><p>GO</p><p><br/></p>