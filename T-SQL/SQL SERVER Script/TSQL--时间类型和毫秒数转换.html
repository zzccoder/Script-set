<p></p><p>SET ANSI_NULLS ON</p><p>GO</p><p>SET QUOTED_IDENTIFIER ON</p><p>GO</p><p>-- =============================================</p><p>-- Author: &nbsp; GGA</p><p>-- Create date: 2013-03-28</p><p>-- Description: 将时间类型转化成BIGINT，返回指定时间</p><p>-- 到-01-01 08:00:00.000的毫秒数</p><p>-- =============================================</p><p>CREATE FUNCTION [dbo].[ufn_GetMSIntFormTime]</p><p>(</p><p>&nbsp; &nbsp;@dt DATETIME</p><p>)</p><p>RETURNS BIGINT</p><p>AS</p><p>BEGIN</p><p>&nbsp; &nbsp;-- Declare the return variable here</p><p>&nbsp; &nbsp;DECLARE @dtInt BIGINT</p><p>&nbsp;</p><p>&nbsp; &nbsp;SELECT @dtInt=DATEDIFF(SECOND , &#39;1970-01-01 08:00:00.000&#39; , @dt ) --秒数</p><p>&nbsp; &nbsp;set @dtInt = @dtInt*1000 + DATEPART(MILLISECOND,@dt) -- 毫秒数</p><p>&nbsp; &nbsp;RETURN @dtInt</p><p>END</p><p>&nbsp;</p><p>GO</p><p>--=================================================</p><p>SET ANSI_NULLS ON</p><p>GO</p><p>SET QUOTED_IDENTIFIER ON</p><p>GO</p><p>-- =============================================</p><p>-- Author: &nbsp; GGA</p><p>-- Create date: 2013-03-28</p><p>-- Description: 根据毫秒数计算出时间</p><p>-- =============================================</p><p>CREATE FUNCTION [dbo].[ufn_GetTimeFormMSInt]</p><p>(</p><p>&nbsp; &nbsp;@msINT BIGINT</p><p>)</p><p>RETURNS DATETIME</p><p>AS</p><p>&nbsp; BEGIN</p><p>&nbsp; &nbsp;DECLARE @secInt BIGINT</p><p>&nbsp; &nbsp;DECLARE @leftMsInt BIGINT</p><p>&nbsp;&nbsp;</p><p>&nbsp; &nbsp;SET @secInt=@msINT/1000;</p><p>&nbsp; &nbsp;SET @leftMsInt=@msINT%1000;</p><p>&nbsp;</p><p>&nbsp; &nbsp;DECLARE @date DATETIME</p><p>&nbsp; &nbsp;SET @date = DATEADD(SECOND,@secInt,&#39;1970-01-01 8:00:00:000&#39;)</p><p>&nbsp; &nbsp;SET @date = DATEADD(MILLISECOND,@leftMsInt,@date)</p><p>&nbsp; &nbsp;RETURN @date</p><p>&nbsp;END</p><p>GO</p><p><br/></p>