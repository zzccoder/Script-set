<p>--====================================================</p><p>--查看镜像状态</p><p>SELECT</p><p>DB_NAME(database_id) AS DatabaseName,</p><p>dm.mirroring_role AS MirroringRole,</p><p>(CASE dm.mirroring_role</p><p>&nbsp; &nbsp;WHEN 1 THEN &#39;主体&#39;</p><p>&nbsp; &nbsp;WHEN 2 THEN &#39;镜像&#39;</p><p>&nbsp; &nbsp;END) AS MirroringRoleDesc,</p><p>dm.mirroring_partner_name AS MirroringPartnerName,</p><p>(CASE WHEN dm.mirroring_witness_name IS NULL</p><p>&nbsp; &nbsp;THEN &#39;--&#39;</p><p>&nbsp; &nbsp;ELSE dm.mirroring_witness_name</p><p>END)AS MirroringWitnessName,</p><p>dm.mirroring_state AS MirroringState,</p><p>(CASE dm.mirroring_state</p><p>&nbsp; &nbsp;WHEN 0 THEN &#39;已挂起&#39;</p><p>&nbsp; &nbsp;WHEN 1 THEN &#39;与其他伙伴断开&#39;</p><p>&nbsp; &nbsp;WHEN 2 THEN &#39;正在同步&#39;</p><p>&nbsp; &nbsp;WHEN 3 THEN &#39;挂起故障转移&#39;</p><p>&nbsp; &nbsp;WHEN 4 THEN &#39;已同步&#39;</p><p>&nbsp; &nbsp;WHEN 5 THEN &#39;伙伴未同步&#39;</p><p>&nbsp; &nbsp;WHEN 6 THEN &#39;伙伴已同步&#39;</p><p>&nbsp; &nbsp;WHEN NULL THEN &#39;无镜像&#39;</p><p>END) AS MirroringStateDesc,</p><p>dm.mirroring_safety_level AS MirroringSafetyLevel,</p><p>(CASE dm.mirroring_safety_level</p><p>&nbsp; &nbsp;WHEN 0 THEN &#39;未知&#39;</p><p>&nbsp; &nbsp;WHEN 1 THEN &#39;异步&#39;</p><p>&nbsp; &nbsp;WHEN 2 THEN &#39;同步&#39;</p><p>&nbsp; &nbsp;WHEN NULL THEN &#39;无镜像&#39;</p><p>END) AS MirroringSafetyLevelDesc,</p><p>dm.mirroring_witness_state AS MirroringWitnessState,</p><p>(CASE dm.mirroring_witness_state</p><p>&nbsp; &nbsp;WHEN 0 THEN &#39;见证未知&#39;</p><p>&nbsp; &nbsp;WHEN 1 THEN &#39;见证连接&#39;</p><p>&nbsp; &nbsp;WHEN 2 THEN &#39;见证断开&#39;</p><p>&nbsp; &nbsp;WHEN NULL THEN &#39;无见证&#39;</p><p>END) AS MirroringWitnessStateDesc</p><p>FROM sys.database_mirroring dm</p><p>WHERE dm.mirroring_guid IS NOT NULL</p><p>&nbsp;</p><p></p>