<p>-=============================================================</p><p>--当前msrepl_commands表中命令涉及表的分布情况</p><p>USE distribution;</p><p>GO</p><p>WITH cte AS(</p><p>SELECT &nbsp;a.xact_seqno,b.entry_time,</p><p>REPLACE(CONVERT(NVARCHAR(1024),</p><p>SUBSTRING(a.command,17,1024)),&#39;[dbo].[sp_MS&#39;,&#39;&#39;) commands</p><p>FROM dbo.MSrepl_commands a(NOLOCK)</p><p>JOIN MSrepl_transactions b(NOLOCK)</p><p>ON a.xact_seqno=b.xact_seqno</p><p>)</p><p>SELECT SUBSTRING(commands,9,CHARINDEX(&#39;]&#39;,commands)-9),COUNT(1)</p><p>FROM cte WHERE CHARINDEX(&#39;]&#39;,commands)&gt;9</p><p>GROUP BY SUBSTRING(commands,9,CHARINDEX(&#39;]&#39;,commands)-9)</p><p>ORDER BY COUNT(1) DESC</p><p><br/></p>