<p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">--======================================</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">--查看阻塞</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">SELECT</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; SPID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = er.session_id</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,STATUS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = ses.STATUS</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,[LOGIN]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = ses.login_name</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,HOST&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = ses.host_name</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,BlkBy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = er.blocking_session_id</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,DBName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = DB_NAME(er.database_id)</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,CommandType&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = er.command</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,SQLStatement&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = st.text</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,ObjectName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = OBJECT_NAME(st.objectid)</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,ElapsedMS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = er.total_elapsed_time</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,CPUTime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = er.cpu_time</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,IOReads&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = er.logical_reads + er.reads</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,IOWrites&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = er.writes</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,LastWaitType&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = er.last_wait_type</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,StartTime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = er.start_time</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,Protocol&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = con.net_transport</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,ConnectionWrites&nbsp;&nbsp; = con.num_writes</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,ConnectionReads&nbsp;&nbsp;&nbsp; = con.num_reads</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,ClientAddress&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = con.client_net_address</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;&nbsp;&nbsp; ,Authentication&nbsp;&nbsp;&nbsp;&nbsp; = con.auth_scheme</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">FROM
sys.dm_exec_requests er</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">OUTER APPLY
sys.dm_exec_sql_text(er.sql_handle) st</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">LEFT JOIN
sys.dm_exec_sessions ses</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">ON ses.session_id =
er.session_id</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">LEFT JOIN
sys.dm_exec_connections con</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">ON con.session_id =
ses.session_id</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">WHERE er.session_id
&gt; 50</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">ORDER BY
er.blocking_session_id DESC,er.session_id</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;</span></p><p style=";font-family:Calibri;font-size:10.5pt"><span style="font-size: 18px;">&nbsp;</span></p><p><br/></p>