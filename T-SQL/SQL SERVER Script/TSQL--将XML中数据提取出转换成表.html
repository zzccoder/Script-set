<p></p><p>--================================================</p><p>--将XML中数据提取出转换成表</p><p>--Note:</p><p>--1&gt;. 表示当前节点</p><p>--2&gt; ..表示上级节点</p><p>--3&gt; @表示属性</p><p>--4&gt; 第一个节点为[0]</p><p><br/></p><p>DECLARE @xml XML</p><p>SET @xml=&#39;</p><p>&lt;Students&gt;</p><p>&nbsp; &nbsp; &lt;Student &nbsp;id=&quot;1001&quot;&gt;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;aaa&lt;/name&gt;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &lt;age&gt;20&lt;/age&gt;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &lt;birthday&gt;1991-2-20&lt;/birthday&gt;</p><p>&nbsp; &nbsp; &lt;/Student&gt;</p><p>&nbsp; &nbsp; &lt;Student &nbsp;id=&quot;1002&quot;&gt;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &lt;name&gt;bbb&lt;/name&gt;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &lt;age&gt;21&lt;/age&gt;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &lt;birthday&gt;1990-2-20&lt;/birthday&gt;</p><p>&nbsp; &nbsp; &lt;/Student&gt; &nbsp; &nbsp;</p><p>&lt;/Students&gt;</p><p>&#39;</p><p>SELECT T.C1.value(&#39;../@id&#39;,&#39;VARCHAR(20)&#39;) AS StudentId,</p><p>T.C1.value(&#39;.&#39;,&#39;VARCHAR(20)&#39;) AS StudentName,</p><p>T.C1.value(&#39;../age[1]&#39;,&#39;VARCHAR(20)&#39;) AS StudentAge,</p><p>T.C1.value(&#39;../birthday[1]&#39;,&#39;datetime&#39;) AS StudentBirthDay</p><p>FROM @xml.nodes(&#39;/Students/Student/name&#39;) AS T(C1)</p><p><br/></p><p>select &nbsp;T.C.value(&#39;@id&#39;,&#39;varchar(max)&#39;) as StudentId,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; T.C.value(&#39;name[1]&#39;,&#39;varchar(max)&#39;) as StudentName,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; T.C.value(&#39;age[1]&#39;,&#39;varchar(max)&#39;) as StudentAge,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; T.C.value(&#39;birthday[1]&#39;,&#39;datetime&#39;) as StudentBirthDay</p><p>from &nbsp; &nbsp;@xml.nodes(&#39;/Students/Student&#39;) as T ( C )</p><p><br/></p><p>&nbsp;</p><p><br/></p>