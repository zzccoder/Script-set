<p></p><p>--查看没关闭事务的空闲Session</p><p>SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED&nbsp;</p><p>SELECT es.session_id</p><p>, es.login_name</p><p>, es.host_name, est.text&nbsp;</p><p>, cn.last_read</p><p>, cn.last_write, es.program_name&nbsp;</p><p>FROM sys.dm_exec_sessions es&nbsp;</p><p>INNER JOIN sys.dm_tran_session_transactions st&nbsp;</p><p>ON es.session_id = st.session_id&nbsp;</p><p>INNER JOIN sys.dm_exec_connections cn&nbsp;</p><p>ON es.session_id = cn.session_id&nbsp;</p><p>CROSS APPLY sys.dm_exec_sql_text(cn.most_recent_sql_handle) est&nbsp;</p><p>LEFT OUTER JOIN sys.dm_exec_requests er &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</p><p>ON st.session_id = er.session_id&nbsp;</p><p>AND er.session_id IS NULL</p>