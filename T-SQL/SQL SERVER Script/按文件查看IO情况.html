<p>--按文件查看IO情况</p><p><br/></p><p>SET TRAN ISOLATION LEVEL READ UNCOMMITTED&nbsp;</p><p>SELECT DB_NAME(database_id) AS [DatabaseName]&nbsp;</p><p>, file_id&nbsp;</p><p>, SUM(CAST(io_stall / 1000.0 AS DECIMAL(20,2))) AS [IO stall (secs)]&nbsp;</p><p>, SUM(CAST(num_of_bytes_read / 1024.0 / 1024.0 AS DECIMAL(20,2))) AS [IO read (MB)]&nbsp;</p><p>, SUM(CAST(num_of_bytes_written / 1024.0 / 1024.0 &nbsp;AS DECIMAL(20,2))) AS [IO written (MB)]&nbsp;</p><p>, SUM(CAST((num_of_bytes_read + num_of_bytes_written) / 1024.0 / 1024.0 AS DECIMAL(20,2))) AS [TotalIO (MB)]&nbsp;</p><p>FROM sys.dm_io_virtual_file_stats(NULL, NULL)&nbsp;</p><p>GROUP BY database_id, file_id&nbsp;</p><p>ORDER BY [IO stall (secs)] DESC</p><p><br/></p>