<p>SELECT &nbsp;ar.replica_server_name AS [副本名称] ,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; DB_NAME(dbr.database_id) AS [数据库名称] ,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; ISNULL(CASE dbr.redo_rate</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;WHEN 0 THEN -1</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ELSE CAST(dbr.redo_queue_size AS FLOAT) / dbr.redo_rate</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;END, -1) AS [Redo延迟(秒)] ,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; ISNULL(CASE dbr.log_send_rate</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;WHEN 0 THEN -1</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ELSE CAST(dbr.log_send_queue_size AS FLOAT)</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; / dbr.log_send_rate</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;END, -1) AS [Log传送延迟(秒)] ,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; dbr.redo_queue_size AS [Redo等待队列(KB)] ,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; dbr.redo_rate AS [Redo速率(KB/S)] ,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; dbr.log_send_queue_size AS [Log传送等待队列(KB)] ,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; dbr.log_send_rate AS [Log传送速率(KB\S)]</p><p>FROM &nbsp; &nbsp;[master].sys.availability_replicas AS AR</p><p>&nbsp; &nbsp; &nbsp; &nbsp; INNER JOIN [master].sys.dm_hadr_database_replica_states AS dbr&nbsp;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; ON ar.replica_id = dbr.replica_id</p><p>WHERE &nbsp; dbr.redo_queue_size IS NOT NULL</p><p><br/></p>