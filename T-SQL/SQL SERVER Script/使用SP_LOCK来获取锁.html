<p></p><p>--====================================================</p><p>--使用SP_LOCK来获取锁</p><p>--查找某个对象上的锁</p><p>DECLARE @T TABLE</p><p>(</p><p>&nbsp;SPID BIGINT,</p><p>&nbsp;DataBaseID INT,</p><p>&nbsp;OBJECTID BIGINT,</p><p>&nbsp;IndexID BIGINT,</p><p>&nbsp;LockType VARCHAR(20),</p><p>&nbsp;LockResource NVARCHAR(200),</p><p>&nbsp;LockMode NVARCHAR(20),</p><p>&nbsp;LockStats NVARCHAR(200)</p><p>)</p><p>INSERT INTO @T</p><p>EXEC SP_LOCK</p><p><br/></p><p>SELECT SPID</p><p>,DataBaseID</p><p>,DB_NAME(DataBaseID) AS DataBaseName</p><p>,OBJECTID</p><p>,OBJECT_Name(OBJECTID,DataBaseID) ObjectName</p><p>,IndexID</p><p>,LockType</p><p>,LockResource</p><p>,LockMode</p><p>,LockStats</p><p>FROM @T</p>